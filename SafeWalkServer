import java.net.*;
import java.io.*;
public class SafeWalkServer implements Runnable{
    private int port;
    private ServerSocket ss;
    private Socket client;
    public SafeWalkServer(int port) throws IOException {
        this.port = port;
        if (port < 1025 || port > 65535) {
            System.out.println("Invalid port number :(");
            System.exit(port);
        }
        ss = new ServerSocket(port);
        client = ss.accept();
        client.setReuseAddress(true);
    }
    public SafeWalkServer() throws IOException {
        port = 8888;
        ss = new ServerSocket(port);
        System.out.println("Port not specified. Connecting to port 8888.");
        client = ss.accept();
        client.setReuseAddress(true);
    }
    public void run() {
//        while (true) {
            try {
                Socket client = ss.accept();
                BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream()));
                PrintWriter pw = new PrintWriter(client.getOutputStream());
                
                ObjectOutputStream oos = new ObjectOutputStream(client.getOutputStream());
                oos.flush();
                ObjectInputStream ois = new ObjectInputStream(client.getInputStream());
                
                String line;
                while ((line = in.readLine()) != null) {
                    pw.print(line);
                    pw.flush();
                }
                
            } catch (IOException e) {
                e.printStackTrace();
            }
            
//        }
        
    }
    
    public int getLocalPort() {
        return port;
    }
    
    public static void main(String[] args) throws IOException {
    }
}
